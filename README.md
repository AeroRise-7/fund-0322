# 基金管理分析工具

一个功能强大的基金数据分析和可视化工具，帮助您更好地了解和分析基金投资表现。

## 功能特点

### 1. 基金数据获取
- 自动获取基金历史净值数据
- 支持数据缓存，避免重复请求
- 智能增量更新，保持数据实时性
- 获取丰富的基金详细信息，包括基金经理、投资主题等

### 2. 基金分析
- 计算关键投资指标
  - 年化收益率
  - 最大回撤
  - 波动率
  - 夏普比率
- 支持多种时间周期分析
  - 月度收益
  - 季度收益
  - 年度收益

### 3. 数据可视化
- 净值走势图
- 收益率分布分析
- 风险指标可视化
- 交互式图表展示

### 4. 自选基金管理
- 添加/删除自选基金
- 基金详情快速查看
- 基金表现对比分析
- 一键批量更新自选基金数据

## 最新功能

### 1. 增强基金信息展示
- 显示基金经理信息
- 展示基金投资主题
- 申购状态实时监控
- 最小申购金额显示

### 2. 改进自选基金功能
- 批量更新自选基金数据
- 智能更新机制，减少网络请求
- 完整的基金信息卡片展示

### 3. 数据API优化
- 利用东方财富API获取更丰富的基金信息
- 直接提取FTYPE作为基金类型，分类更精准
- 支持投资主题展示

## 安装说明

1. 克隆项目到本地

2. 安装依赖包
```bash
pip install -r requirements.txt
```

## 使用方法

### 启动Web应用
```bash
streamlit run main.py
```

或者直接双击项目根目录下的`start.bat`文件，它会自动安装依赖并启动应用程序。

### 主要功能模块

#### 1. 基金数据模块 (fund_data.py)
- 负责基金数据的获取和缓存管理
- 提供基金基本信息查询
- 支持历史净值数据获取
- 获取丰富的基金元数据

#### 2. 基金分析模块 (fund_analysis.py)
- 实现各类投资指标计算
- 提供收益率分析功能
- 支持风险指标评估

#### 3. 可视化模块 (fund_visualization.py)
- 生成各类分析图表
- 支持多维度数据展示
- 提供直观的数据展现

#### 4. Web界面模块 (main.py 和 ui/)
- 提供友好的用户界面
- 支持交互式数据分析
- 实现自选基金管理
- 包含多个页面和组件

## 数据存储

- 基金数据缓存：`data/fund_cache/`
- 自选基金配置：`favorite_funds.json`

## 注意事项

1. 数据来源于公开网络，仅供参考
2. 建议定期更新基金数据以保证分析的准确性
3. 投资有风险，决策需谨慎
4. 软件不会过于频繁地请求数据，遵循合理的缓存策略

## 项目结构

```
├── data/                # 数据存储目录
│   └── fund_cache/      # 基金数据缓存
├── src/                 # 源代码目录
│   ├── fund_data.py       # 数据获取模块
│   ├── fund_analysis.py   # 分析模块
│   ├── fund_visualization.py # 可视化模块
│   ├── fund_plot.py       # 绘图模块
│   └── cli.py            # 命令行接口
├── ui/                  # 用户界面模块
│   ├── components.py      # UI组件
│   ├── pages.py           # 页面定义
│   └── other_pages.py     # 其他页面
├── main.py              # Web应用主程序
├── favorite_funds.json  # 自选基金配置
├── requirements.txt     # 项目依赖
└── start.bat            # 启动脚本
```

## 更新日志

### 2025.03.21
- 增加基金经理、申购状态等信息显示
- 优化基金类型判断，直接使用FTYPE字段
- 添加投资主题展示
- 修复申购状态判断逻辑，现在空值显示为"未知"
- 改进自选基金刷新功能，更智能地更新数据